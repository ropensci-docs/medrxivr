<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Building complex search strategies • medrxivr</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building complex search strategies">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">medrxivr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../articles/medrxivr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/building-complex-search-strategies.html">Building complex search strategies</a></li>
    <li><a class="dropdown-item" href="../articles/medrxiv-api.html">Interacting with the Cold Spring Harbour Laboratory API</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/medrxivr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Building complex search strategies</h1>
                        <h4 data-toc-skip class="author">Luke A
McGuinness</h4>
            
            <h4 data-toc-skip class="date">2024-10-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/medrxivr/blob/master/vignettes/building-complex-search-strategies.Rmd" class="external-link"><code>vignettes/building-complex-search-strategies.Rmd</code></a></small>
      <div class="d-none name"><code>building-complex-search-strategies.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="building-your-search-with-boolean-operators">Building your search with Boolean operators<a class="anchor" aria-label="anchor" href="#building-your-search-with-boolean-operators"></a>
</h2>
<p>First load the <code>medrxivr</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/medrxivr">medrxivr</a></span><span class="op">)</span></span></code></pre></div>
<p>To find records that contain any of many terms, pass the terms as a
vector to the <code><a href="../reference/mx_search.html">mx_search()</a></code> function, as in the code chunk
below. Query terms can include regular expression syntax - see the <a href="#regex">section at the end of this document</a> on common regular
expression that may be useful when searching.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myquery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dementia"</span>,<span class="st">"vascular"</span>,<span class="st">"alzheimer's"</span><span class="op">)</span> <span class="co"># Combined with Boolean OR</span></span>
<span></span>
<span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,     <span class="co"># Use daily snapshot for data</span></span>
<span>                        query <span class="op">=</span> <span class="va">myquery</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 2272 record(s) matching your search.</span></span></code></pre></div>
<p>To find records relevant to more than one topic domain, create a
vector for each topic (note: there is no upper limit on the number of
topics your can have) and combine these vectors into a list which is
then passed to the <code><a href="../reference/mx_search.html">mx_search()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">topic1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dementia"</span>,<span class="st">"vascular"</span>,<span class="st">"alzheimer's"</span><span class="op">)</span>  <span class="co"># Combined with Boolean OR</span></span>
<span><span class="va">topic2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lipids"</span>,<span class="st">"statins"</span>,<span class="st">"cholesterol"</span><span class="op">)</span>     <span class="co"># Combined with Boolean OR</span></span>
<span><span class="va">myquery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">topic1</span>, <span class="va">topic2</span><span class="op">)</span>                    <span class="co"># Combined with Boolean AND</span></span>
<span></span>
<span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="va">myquery</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 143 record(s) matching your search.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="additional-filters-and-options">Additional filters and options<a class="anchor" aria-label="anchor" href="#additional-filters-and-options"></a>
</h2>
<div class="section level3">
<h3 id="limit-search-by-field">Limit search by field<a class="anchor" aria-label="anchor" href="#limit-search-by-field"></a>
</h3>
<p>By default, a range of fields (title, abstract, first author,
subject, link (which contains DOI)) are searched, but you can limit the
search to a subset of these using the <code>fields</code> argument:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Limit search to title/abstract</span></span>
<span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"dementia"</span>,</span>
<span>                        fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"abstract"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 427 record(s) matching your search.</span></span>
<span></span>
<span><span class="co"># Search by DOI</span></span>
<span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"10.1101/2020.01.30.20019836"</span>,</span>
<span>                        fields <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 1 record(s) matching your search.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exclude-records-containing-certain-terms">Exclude records containing certain terms<a class="anchor" aria-label="anchor" href="#exclude-records-containing-certain-terms"></a>
</h3>
<p>Often it is useful to be able to exclude records that contain a
certain term that is not relevant to your search. For example, in the
search below, we are looking for records related to “dementia” alone by
excluding those that mention “mild cognitive impairment”:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"dementia"</span>,</span>
<span>                        NOT <span class="op">=</span> <span class="st">"[Mm]ild cognitive impairment"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 366 record(s) matching your search.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="limit-by-date-posted">Limit by date posted<a class="anchor" aria-label="anchor" href="#limit-by-date-posted"></a>
</h3>
<p>You can define either/both of the earliest and latest date you wish
to include records from. Note: the search is inclusive of both dates
specified:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"dementia"</span>,</span>
<span>                        from_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,      <span class="co"># 1st Jan 2020</span></span>
<span>                        to_date <span class="op">=</span> <span class="st">"2020-01-08"</span><span class="op">)</span>        <span class="co"># 8th Jan 2020</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 2 record(s) matching your search.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="return-multiple-versions-of-a-record">Return multiple versions of a record<a class="anchor" aria-label="anchor" href="#return-multiple-versions-of-a-record"></a>
</h3>
<p><em>medRxiv</em> allows authors to upload a new version of their
preprint as often as they like. By default, <code>medrxivr</code> only
returns the most recent version of the preprint, but if you are
interested in exploring how a record changed over time, you can retrieve
all versions of the preprint by setting
<code>deduplicate = FALSE</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"10.1101/2020.01.30.20019836"</span>,</span>
<span>                        fields <span class="op">=</span> <span class="st">"link"</span>,</span>
<span>                        deduplicate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 4 record(s) matching your search.</span></span>
<span><span class="co">#&gt; Note, there may be &gt;1 version of the same record.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="regex">Useful syntax for the systematic reviewer<a class="anchor" aria-label="anchor" href="#regex"></a>
</h2>
<div class="section level3">
<h3 id="capitalisation">Capitalisation<a class="anchor" aria-label="anchor" href="#capitalisation"></a>
</h3>
<p><strong>Example regex:</strong> <code>[Dd]ementia</code><br><strong>Description:</strong> The search is case sensitive, so this
syntax allows you to find both <b>D</b>ementia and <b>d</b>ementia using
a single term, rather than having to enter them separately. However,
setting the <code>autocaps</code> argument of <code><a href="../reference/mx_search.html">mx_search()</a></code>
to <code>TRUE</code> will automatically search for both capitalised and
uncapitalised versions of your search terms (e.g. with
<code>auto_caps = TRUE</code> you just need to search for “dementia” to
find both <b>D</b>ementia and <b>d</b>ementia - behind the scenes,
“dementia” is converted to “[Dd]ementia”.</p>
</div>
<div class="section level3">
<h3 id="wildcard">Wildcard<a class="anchor" aria-label="anchor" href="#wildcard"></a>
</h3>
<p><strong>Example regex:</strong> <code>randomi*ation</code><br><strong>Description:</strong> The wildcard operator “*” defines any
single alphanumeric character - in this case, the term will find both
randomi<b>s</b>ation and randomi<b>z</b>ation.</p>
</div>
<div class="section level3">
<h3 id="near">NEAR<a class="anchor" aria-label="anchor" href="#near"></a>
</h3>
<p><strong>Example regex:</strong>
<code>systematic NEAR4 review</code><br><strong>Description:</strong> The “NEAR4” operator defines that up to 4
words can be between <b>systematic</b> and <b>review</b> and the search
will still find it. To change how far apart the terms are allowed to be,
simply change the number following NEAR (e.g. to find terms that are
only one word apart, the syntax would be
<code>systematic NEAR1 review</code>). <strong>Please note that the
search is directional, in that the example term here will find
“systematic methods for the review”, but will not find “the review was
systematic”.</strong></p>
</div>
<div class="section level3">
<h3 id="word-limits">Word limits<a class="anchor" aria-label="anchor" href="#word-limits"></a>
</h3>
<p><strong>Example regex:</strong> <code>\\bNCOV\\b</code><br><strong>Description:</strong> Sometimes it is useful to be able to
define the start and end of terms. For example, if you were searching
for NCOV-19, simply using <code>ncov</code> as your search term would
also return records containing u<b>ncov</b>ered. Using <code>\\b</code>
allows you to define where the term beings and ends, thus excluding
false positive matches.</p>
</div>
<div class="section level3">
<h3 id="example-using-these-regexes">Example using these regexes<a class="anchor" aria-label="anchor" href="#example-using-these-regexes"></a>
</h3>
<p>To find records that contain “Mendelian” within 4 words of
“randomisation” (with varying capitalisation of “Mendelian” and UK/US
spellings of “randomisation”), the following syntax is correct:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                        query <span class="op">=</span> <span class="st">"mendelian NEAR4 randomi*ation"</span>, </span>
<span>                        auto_caps <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using medRxiv snapshot - 2022-07-06 01:09</span></span>
<span><span class="co">#&gt; Found 431 record(s) matching your search.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="regex-tester">Regex tester<a class="anchor" aria-label="anchor" href="#regex-tester"></a>
</h3>
<p>To check whether your search term will find what you expect it to,
there is a useful <a href="https://spannbaueradam.shinyapps.io/r_regex_tester/" class="external-link">regex
tester</a>, designed by <a href="https://adamspannbauer.github.io/2018/01/16/r-regex-tester-shiny-app/" class="external-link">Adam
Spannbauer</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
